<!DOCTYPE html>
<html>

<head>
  <title> Chat bot</title>
  <style>
    body {
      font-family: Arial;
      margin-top: 0px;
      margin-bottom: 0px;

    }

    .welcomeText {
      font-size: 17px;
      text-align: center;
      text-align: center;
      font-size: 20px;
      font-weight: 600;
      color: #5fc6c8;
      margin: 40px auto;
      line-height: 1.6;
      max-width: 600px;
      font-style: italic;
      padding: 20px;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);

    }

    .send-button {

      background-color: rgb(25, 135, 84);
      color: white;
      padding: 12px 20px;
      margin-left: 10px;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      cursor: pointer;
    }

    .chat-input {
      padding: 12px 15px;
      border-radius: 10px;
      border-width: 1px;
      font-size: 15px;
      flex-grow: 1;
    }

    .chat-input-container {
      display: flex;
      margin-bottom: 20px;
    }

    .app-container {
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .chat-message-user {
      display: flex;
      justify-content: end;
      align-items: start;
    }

    .chat-message-robot {
      display: flex;
      align-items: start;
    }

    .chat-message-text {
      margin-right: 10px;
      padding: 15px 20px;
      background-color: rgb(238, 238, 238);
      margin-left: 10px;
      margin-bottom: 20px;
      max-width: 300px;
      ;
    }

    .chat-message-profile {
      width: 45px;
    }

    .chat-msg-container {
      flex-grow: 1;
      margin-top: 20px;
      overflow: scroll;
      scrollbar-width: none;
    }
  </style>
</head>

<body>
  <div class="js-container"></div>

  <script src="https://unpkg.com/supersimpledev/react.js"></script>
  <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

  <script src="https://unpkg.com/supersimpledev/chatbot.js"></script>
  <script src="https://unpkg.com/supersimpledev/babel.js"></script>
  <script type="text/babel">

    function ChatInput({ chatMessages, updateData }) {
      const [inputText, setInputText] = React.useState('');
      //let text='';
      function saveInput(evet) {
        setInputText(evet.target.value);
        //text=evet.target.value;  
      }
      function sendMessage() {

        const response = Chatbot.getResponse(inputText);
        setInputText('');
        updateData([...chatMessages, {
          msg: inputText,
          sender: "user",
          key: crypto.randomUUID()
        },
        {
          msg: response,
          sender: "robot",
          key: crypto.randomUUID()
        }
        ]);
        //text='';
      }
      return (
        <div className="chat-input-container">
          <input className="chat-input" placeholder="Send a message" size="20" onChange={saveInput} value={inputText} />
          <button onClick={sendMessage} className="send-button">Send</button>
        </div>
      );

    }

    function ChatMessage({ msg, sender }) {

      return (
        <div className={sender === 'user' ? 'chat-message-user' : 'chat-message-robot'}>
          {sender === 'robot' && <img src="robot.png" className="chat-message-profile" />}
          <div className="chat-message-text">
            {msg}
          </div>
          {sender === 'user' && <img src="user.png" className="chat-message-profile" />}
        </div>
      );

    }
    function ChatMessages({ chatMessages }) {
      const chatMessagesRef = React.useRef(null);
      React.useEffect(() => {
        const containerELlem = chatMessagesRef.current;
        if (containerELlem) {
          containerELlem.scrollTop = containerELlem.scrollHeight;

        }
      }, [chatMessages]);


      return (
        <div className="chat-msg-container" ref={chatMessagesRef}>
          {
            chatMessages.map((each) => {
              return (
                <ChatMessage msg={each.msg} sender={each.sender} key={each.key} />
              );
            })
          }
          </div>
          );
}
          function App(){
      
const array=React.useState([



          ]);

          const chatMessages=array[0];
          const updateData=array[1];

          return (
          <div className="app-container">
            {chatMessages.length == 0 &&(
             <p class="welcomeText">
              Hello! I am MiniBot.<br />
              I can help you with today's date, flip a coin and roll a dice.
             </p>
          )}
            <ChatMessages chatMessages={chatMessages} />
            <ChatInput chatMessages={chatMessages} updateData={updateData}> </ChatInput>
          </div>
          );
    }


          const container = document.querySelector('.js-container');
          ReactDOM.createRoot(container).render(<App />);
  </script>
</body>

</html>